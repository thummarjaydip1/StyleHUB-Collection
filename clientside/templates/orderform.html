{% include "header.html" %}

<div class="max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg mt-10">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Order {{ product.name }}</h2>

    {% if product.image %}
    <div class="w-full mb-6 flex justify-center">
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-48 h-48 object-contain rounded-lg shadow">
    </div>
    {% endif %}

    <form method="post" class="space-y-4">
        {% csrf_token %}

        <div>
            <label class="block font-semibold mb-1">Product</label>
            <input type="text" value="{{ product.name }}" readonly
                   class="border p-2 w-full rounded bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400">
        </div>

        <div id="sizeDropdown">
            <label class="block font-semibold mb-1">Size</label>
            <select name="size"
                    class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-400">
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="X">X</option>
                <option value="XL">XL</option>
                <option value="2XL">2XL</option>
            </select>
        </div>

        <div id="waistInput" class="hidden">
            <label class="block font-semibold mb-1">Waist Size (in inches)</label>
            <input type="text" name="size" placeholder="Eg: 30, 32, 34"
                class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-400">
        </div>


        <div>
            <label class="block font-semibold mb-1">Price</label>
            <input type="number" id="price" value="{{ product.price }}" readonly
                   class="border p-2 w-full rounded bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400">
        </div>

        <div>
            <label class="block font-semibold mb-1">Quantity</label>
            <input type="number" name="quantity" id="quantity" value="{{ quantity }}" min="1"
                   class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
                   oninput="calculateTotal()">
        </div>

        <div>
            <label class="block font-semibold mb-1">Total Price</label>
            <input type="number" name="total_price" id="total" value="{{ total_price }}" readonly
                   class="border p-2 w-full rounded bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400">
        </div>

        <div>
            <label class="block font-semibold mb-1">Mobile Number</label>
            <input type="text" name="mobile" placeholder="Mobile Number" required
                   class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-400">
        </div>

        <div>
            <label class="block font-semibold mb-1">Delivery Address</label>
            <textarea name="address" placeholder="Delivery Address" required
                      class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-400"></textarea>
        </div>

        <button type="submit"
                class="bg-blue-600 text-white px-4 py-2 rounded w-full hover:bg-blue-700 transition">
            Confirm Order
        </button>
    </form>
</div>

<script>
function calculateTotal() {
    let price = parseFloat(document.getElementById("price").value) || 0;
    let qty = parseInt(document.getElementById("quantity").value) || 1;
    document.getElementById("total").value = price * qty;
}
</script>
<script>
    const productName = "{{ product.name|lower }}";
    const productCategory = "{{ product.category|lower }}";

    if (productName.includes("jeans") || productCategory.includes("jeans")) {
        document.getElementById("sizeDropdown").classList.add("hidden");
        document.getElementById("waistInput").classList.remove("hidden");
    }
</script>

{% include "footer.html" %}
